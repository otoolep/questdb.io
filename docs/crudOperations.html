<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>CRUD Operations · QuestDB</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="QuestDB&#x27;s data store is mostly meant to be immutable. We plan to support out-of-order inserts from 4.3 which "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="CRUD Operations · QuestDB"/><meta property="og:type" content="website"/><meta property="og:url" content="https://questdb.io/"/><meta property="og:description" content="QuestDB&#x27;s data store is mostly meant to be immutable. We plan to support out-of-order inserts from 4.3 which "/><meta property="og:image" content="https://questdb.io/img/favicon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://questdb.io/img/favicon.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://questdb.io/blog/atom.xml" title="QuestDB Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://questdb.io/blog/feed.xml" title="QuestDB Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-145747842-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600,700|Source+Code+Pro:400,700|Open+Sans:300,400,600,700"/><script type="text/javascript" src="/js/menu-hack.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/getstarted.js"></script><script type="text/javascript" src="/js/signup.js"></script><script type="text/javascript" src="/js/hotjar.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/QuestDB_Logo.png" alt="QuestDB"/><h2 class="headerTitleWithLogo">QuestDB</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/" target="_self">Home</a></li><li class=""><a href="/getstarted" target="_self">Get QuestDB</a></li><li class="siteNavGroupActive"><a href="/docs/documentationOverview" target="_self">Documentation</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/careers" target="_self">Careers</a></li><li class=""><a href="/about" target="_self">About</a></li><li class=""><a href="https://serieux-saucisson-79115.herokuapp.com/" target="_self">Join</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search..." title="Search..."/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Concepts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Intro<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/documentationOverview">Documentation overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Installation</h4><ul><li class="navListItem"><a class="navItem" href="/docs/installationOverview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/installFromDockerImage">Install from Docker image</a></li><li class="navListItem"><a class="navItem" href="/docs/installFromHomebrew">Install from Homebrew</a></li><li class="navListItem"><a class="navItem" href="/docs/installFromBinary">Install from Binary</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/usingWebConsole">Using the Web Console</a></li><li class="navListItem"><a class="navItem" href="/docs/myFirstDatabase">My First Database</a></li><li class="navListItem"><a class="navItem" href="/docs/gettestdata">Obtaining Test Data</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/storageModel">Storage Model</a></li><li class="navListItem"><a class="navItem" href="/docs/datatypes">Data Types</a></li><li class="navListItem"><a class="navItem" href="/docs/designatedTimestamp">Designated timestamp</a></li><li class="navListItem"><a class="navItem" href="/docs/partitions">Partitions</a></li><li class="navListItem"><a class="navItem" href="/docs/symbol">Symbol</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/crudOperations">CRUD Operations</a></li><li class="navListItem"><a class="navItem" href="/docs/indexes">Indexes</a></li><li class="navListItem"><a class="navItem" href="/docs/sqlOverview">SQL Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Configuration</h4><ul><li class="navListItem"><a class="navItem" href="/docs/rootDirectoryStructure">Root Directory Structure</a></li><li class="navListItem"><a class="navItem" href="/docs/serverConf">Configuration Properties</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">APIs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/restAPI">REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/embeddedJavaAPI">Embedded Java API</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Functions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/functionsAggregation">Aggregation</a></li><li class="navListItem"><a class="navItem" href="/docs/functionsNumeric">Numeric</a></li><li class="navListItem"><a class="navItem" href="/docs/functionsDateAndTime">Date and Time</a></li><li class="navListItem"><a class="navItem" href="/docs/functionsRandomValueGenerators">Random Value Generators</a></li><li class="navListItem"><a class="navItem" href="/docs/functionsRowGenerator">Row Generator</a></li><li class="navListItem"><a class="navItem" href="/docs/functionsTimestampGenerator">Timestamp Generator</a></li><li class="navListItem"><a class="navItem" href="/docs/functionsText">Text Functions</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">SQL Reference</h4><ul><li class="navListItem"><a class="navItem" href="/docs/sqlExecutionOrder">SQL Execution Order</a></li><li class="navListItem"><a class="navItem" href="/docs/alterTableAddColumn">ALTER TABLE ADD COLUMN</a></li><li class="navListItem"><a class="navItem" href="/docs/alterTableDropColumn">ALTER TABLE DROP COLUMN</a></li><li class="navListItem"><a class="navItem" href="/docs/alterTableAlterColumnAddIndex">ALTER TABLE COLUMN ADD INDEX</a></li><li class="navListItem"><a class="navItem" href="/docs/alterTableDropPartition">ALTER TABLE DROP PARTITION</a></li><li class="navListItem"><a class="navItem" href="/docs/backup">BACKUP</a></li><li class="navListItem"><a class="navItem" href="/docs/cast">CAST</a></li><li class="navListItem"><a class="navItem" href="/docs/copy">COPY</a></li><li class="navListItem"><a class="navItem" href="/docs/createTable">CREATE TABLE</a></li><li class="navListItem"><a class="navItem" href="/docs/rename">RENAME TABLE</a></li><li class="navListItem"><a class="navItem" href="/docs/drop">DROP TABLE</a></li><li class="navListItem"><a class="navItem" href="/docs/insert">INSERT</a></li><li class="navListItem"><a class="navItem" href="/docs/joins">JOINS</a></li><li class="navListItem"><a class="navItem" href="/docs/select">SELECT</a></li><li class="navListItem"><a class="navItem" href="/docs/truncate">TRUNCATE TABLE</a></li><li class="navListItem"><a class="navItem" href="/docs/union">UNION</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Java API Reference</h4><ul><li class="navListItem"><a class="navItem" href="/docs/javaAPIOverview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/influxSenderLibrary">Influx Sender Library</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/faq">Frequently Asked</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">CRUD Operations</h1></header><article><div><span><p>QuestDB's data store is mostly meant to be immutable. We plan to support out-of-order inserts from 4.3 which
in effect allows <code>UPDATE</code> and <code>DELETE</code> operations if needed. However, the most efficient way to use QuestDB is as <code>append only</code>.
We propose an efficient model to perform CRUD operations revolving around the use of <code>LATEST BY</code>.
This page describes each of CRUD operations (<a href="#create">create</a>, <a href="#read">read</a>, <a href="#update">update</a>, <a href="#delete">delete</a>) and how to implement them in an append-only scenario at high efficiency.</p>
<h2><a class="anchor" aria-hidden="true" id="create"></a><a href="#create" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(C)reate</h2>
<p>The Create operation in QuestDB appends records to bottom of a table. If the table has a <a href="/docs/designatedTimestamp">designated timestamp</a>, new
record timestamps must be superior or equal to the latest timestamp. Attempts to add a timestamp in middle of a
table will result in a <code>timestamp out of order</code> error.</p>
<p>If the table is <a href="/docs/partitions">partitioned</a>, then
the <code>timestamp</code> value determines which partition the record is appended to. In this case, only the last partition can be appended to.</p>
<p>When a table does not have a <code>designated timestamp</code>, records can be added in any timestamp order and the table will only have one partition.</p>
<p>Let's first create table that holds bank balances for customers.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-1-tab-2" class="nav-link active" data-group="group_1" data-tab="tab-group-1-content-2">SQL</div><div id="tab-group-1-tab-3" class="nav-link" data-group="group_1" data-tab="tab-group-1-content-3">REST</div><div id="tab-group-1-tab-4" class="nav-link" data-group="group_1" data-tab="tab-group-1-content-4">Java</div><div id="tab-group-1-tab-5" class="nav-link" data-group="group_1" data-tab="tab-group-1-content-5">JDBC</div></div><div class="tab-content"><div id="tab-group-1-content-2" class="tab-pane active" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> balances (<br />    cust_id <span class="hljs-type_name">int</span>, <br />    balance_ccy <span class="hljs-type_name">symbol</span>, <br />    balance <span class="hljs-type_name">double</span>, <br />    inactive <span class="hljs-type_name">boolean</span>,<br />    <span class="hljs-type_name">timestamp</span> <span class="hljs-type_name">timestamp</span><br />);<br /></code></pre>
</span></div></div><div id="tab-group-1-content-3" class="tab-pane" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-shell">curl -G "http://localhost:13005/exec" --data-urlencode "query=<br />create table balances (<br />    cust_id int,<br />    balance_ccy symbol,<br />    balance double,<br />    inactive boolean,<br />    timestamp timestamp<br />)"<br /></code></pre>
</span></div></div><div id="tab-group-1-content-4" class="tab-pane" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-keyword">final</span> String cairoDatabaseRoot = <span class="hljs-string">"/tmp"</span>;<br /><span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(<br />    <span class="hljs-keyword">new</span> DefaultCairoConfiguration(cairoDatabaseRoot))<br />) {<br />    <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<br />        compiler.compile(<span class="hljs-string">"create table balances (\n"</span> +<br />                <span class="hljs-string">"    cust_id int, \n"</span> +<br />                <span class="hljs-string">"    balance_ccy symbol, \n"</span> +<br />                <span class="hljs-string">"    balance double, \n"</span> +<br />                <span class="hljs-string">"    inactive boolean, \n"</span> +<br />                <span class="hljs-string">"    timestamp timestamp\n"</span> +<br />                <span class="hljs-string">")"</span>);<br />    }<br />}<br /></code></pre>
</span></div></div><div id="tab-group-1-content-5" class="tab-pane" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-java">Properties properties = <span class="hljs-keyword">new</span> Properties();<br />properties.setProperty(<span class="hljs-string">"user"</span>, <span class="hljs-string">"admin"</span>);<br />properties.setProperty(<span class="hljs-string">"password"</span>, <span class="hljs-string">"quest"</span>);<br />properties.setProperty(<span class="hljs-string">"sslmode"</span>, <span class="hljs-string">"disable"</span>);<br /><br /><span class="hljs-keyword">final</span> Connection connection = <br />    DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:9120/qdb"</span>, properties);<br />PreparedStatement statement = connection.prepareStatement(<br />    <span class="hljs-string">"create table balances ("</span> +<br />    <span class="hljs-string">"    cust_id int,"</span> +<br />    <span class="hljs-string">"    balance_ccy symbol,"</span> +<br />    <span class="hljs-string">"    balance double,"</span> +<br />    <span class="hljs-string">"    inactive boolean,"</span> +<br />    <span class="hljs-string">"    timestamp timestamp"</span> +<br />    <span class="hljs-string">")"</span><br />);<br />statement.execute();<br />connection.close();<br /><br /></code></pre>
</span></div></div></div></div>
<ul>
<li><code>cust_id</code> is the customer identifier. It uniquely identifies customer.</li>
<li><code>balance_ccy</code> balance currency. We use <code>SYMBOL</code> here to avoid storing text against each record to save space and increase database performance.</li>
<li><code>balance</code> is the current balance for customer and currency tuple.</li>
<li><code>inactive</code> is used to flag deleted records.</li>
<li><code>timestamp</code> timestamp in microseconds of the record. Note that if you receive the timestamp data as a string, it could also be inserted using <a href="/docs/functionsDateAndTime#to_timestamp">to_timestamp</a>.</li>
</ul>
<p>Let's now insert a few records:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-6-tab-7" class="nav-link active" data-group="group_6" data-tab="tab-group-6-content-7">SQL</div><div id="tab-group-6-tab-8" class="nav-link" data-group="group_6" data-tab="tab-group-6-content-8">REST</div><div id="tab-group-6-tab-9" class="nav-link" data-group="group_6" data-tab="tab-group-6-content-9">Java Raw</div><div id="tab-group-6-tab-10" class="nav-link" data-group="group_6" data-tab="tab-group-6-content-10">JDBC</div></div><div class="tab-content"><div id="tab-group-6-content-7" class="tab-pane active" data-group="group_6" tabindex="-1"><div><span><pre><code class="hljs css language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> balances (cust_id, balance_ccy, balance, <span class="hljs-type_name">timestamp</span>)<br /><span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'USD'</span>, <span class="hljs-number">1500.00</span>, <span class="hljs-number">1587571882704665</span>);<br /><br /><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> balances (cust_id, balance_ccy, balance, <span class="hljs-type_name">timestamp</span>)<br /><span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'EUR'</span>, <span class="hljs-number">650.50</span>, <span class="hljs-number">1587571892904234</span>);<br /><br /><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> balances (cust_id, balance_ccy, balance, <span class="hljs-type_name">timestamp</span>)<br /><span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>, <span class="hljs-string">'USD'</span>, <span class="hljs-number">900.75</span>, <span class="hljs-number">1587571963504432</span>);<br /><br /><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> balances (cust_id, balance_ccy, balance, <span class="hljs-type_name">timestamp</span>)<br /><span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>, <span class="hljs-string">'EUR'</span>, <span class="hljs-number">880.20</span>, <span class="hljs-number">1587572314404665</span>);<br /></code></pre>
</span></div></div><div id="tab-group-6-content-8" class="tab-pane" data-group="group_6" tabindex="-1"><div><span><pre><code class="hljs css language-shell">curl -G "http://localhost:13005/exec" --data-urlencode "query=<br />insert into balances (cust_id, balance_ccy, balance, timestamp)<br />    values (1, 'USD', 1500.00, 1587571882704665)<br />"<br /></code></pre>
</span></div></div><div id="tab-group-6-content-9" class="tab-pane" data-group="group_6" tabindex="-1"><div><span><pre><code class="hljs css language-java">CairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(<span class="hljs-string">"."</span>);<br /><span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {<br />    <span class="hljs-keyword">try</span> (TableWriter writer = engine.getWriter(AllowAllCairoSecurityContext.INSTANCE, <span class="hljs-string">"balances"</span>)) {<br />        TableWriter.Row r;<br /><br />        r = writer.newRow(<span class="hljs-number">1587571882704665</span>); <span class="hljs-comment">// timestamp</span><br />        r.putInt(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// cust_id</span><br />        r.putSym(<span class="hljs-number">1</span>, <span class="hljs-string">"USD"</span>); <span class="hljs-comment">// symbol</span><br />        r.putDouble(<span class="hljs-number">2</span>, <span class="hljs-number">1500.00</span>); <span class="hljs-comment">// balance</span><br />        r.append();<br /><br />        r = writer.newRow(<span class="hljs-number">1587571892904234</span>); <span class="hljs-comment">// timestamp</span><br />        r.putInt(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// cust_id</span><br />        r.putSym(<span class="hljs-number">1</span>, <span class="hljs-string">"EUR"</span>); <span class="hljs-comment">// symbol</span><br />        r.putDouble(<span class="hljs-number">2</span>, <span class="hljs-number">650.5</span>); <span class="hljs-comment">// balance</span><br />        r.append();<br /><br />        r = writer.newRow(<span class="hljs-number">1587571963504432</span>); <span class="hljs-comment">// timestamp</span><br />        r.putInt(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// cust_id</span><br />        r.putSym(<span class="hljs-number">1</span>, <span class="hljs-string">"USD"</span>); <span class="hljs-comment">// symbol</span><br />        r.putDouble(<span class="hljs-number">2</span>, <span class="hljs-number">900.75</span>); <span class="hljs-comment">// balance</span><br />        r.append();<br /><br />        r = writer.newRow(<span class="hljs-number">1587572314404665</span>); <span class="hljs-comment">// timestamp</span><br />        r.putInt(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// cust_id</span><br />        r.putSym(<span class="hljs-number">1</span>, <span class="hljs-string">"USD"</span>); <span class="hljs-comment">// symbol</span><br />        r.putDouble(<span class="hljs-number">2</span>, <span class="hljs-number">880.2</span>); <span class="hljs-comment">// balance</span><br />        r.append();<br /><br />        writer.commit();<br />    }<br />}<br /></code></pre>
</span></div></div><div id="tab-group-6-content-10" class="tab-pane" data-group="group_6" tabindex="-1"><div><span><pre><code class="hljs css language-java">Properties properties = <span class="hljs-keyword">new</span> Properties();<br />properties.setProperty(<span class="hljs-string">"user"</span>, <span class="hljs-string">"admin"</span>);<br />properties.setProperty(<span class="hljs-string">"password"</span>, <span class="hljs-string">"quest"</span>);<br />properties.setProperty(<span class="hljs-string">"sslmode"</span>, <span class="hljs-string">"disable"</span>);<br /><br /><span class="hljs-keyword">final</span> Connection connection = <br />    DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:9120/qdb"</span>, properties);<br />PreparedStatement insert = connection.prepareStatement(<br />    <span class="hljs-string">"insert into balances (cust_id, balance_ccy, balance, timestamp)"</span>+<br />        <span class="hljs-string">"values (?, ?, ?, ?)"</span>;<br /><br />)<br />insert.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br />insert.setString(<span class="hljs-number">2</span>, <span class="hljs-string">"USD"</span>);<br />insert.setDouble(<span class="hljs-number">3</span>, <span class="hljs-number">1500</span>);<br />insert.setLong(<span class="hljs-number">4</span>, <span class="hljs-number">1587571882704665</span>);<br /><br />insert.execute();<br />connection.close();<br /><br /></code></pre>
</span></div></div></div></div>
<p>Our resulting table looks like the following.</p>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
<tr><td>2</td><td>USD</td><td>900.75</td><td>FALSE</td><td>2020-04-22T16:12:43.504432Z</td></tr>
<tr><td>2</td><td>EUR</td><td>880.2</td><td>FALSE</td><td>2020-04-22T16:18:34.404665Z</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="read"></a><a href="#read" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(R)ead</h2>
<p>Reading records can be done using <code>SELECT</code> or by reading a table directly via the Java API.
Reading via the <a href="/docs/embeddedJavaAPI">Java API</a> (see tab <code>Java Raw</code>) iterates over a table and can therefore only access one table at a time.
If you would like to query various tables via the Java API, you can pass SQL to Java and read the resulting table
(see tab <code>Java SQL</code>).</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-11-tab-12" class="nav-link active" data-group="group_11" data-tab="tab-group-11-content-12">SQL</div><div id="tab-group-11-tab-13" class="nav-link" data-group="group_11" data-tab="tab-group-11-content-13">REST</div><div id="tab-group-11-tab-14" class="nav-link" data-group="group_11" data-tab="tab-group-11-content-14">Java SQL</div><div id="tab-group-11-tab-15" class="nav-link" data-group="group_11" data-tab="tab-group-11-content-15">Java Raw</div><div id="tab-group-11-tab-16" class="nav-link" data-group="group_11" data-tab="tab-group-11-content-16">JDBC</div></div><div class="tab-content"><div id="tab-group-11-content-12" class="tab-pane active" data-group="group_11" tabindex="-1"><div><span><pre><code class="hljs css language-sql">balances; <br /></code></pre>
</span></div></div><div id="tab-group-11-content-13" class="tab-pane" data-group="group_11" tabindex="-1"><div><span><pre><code class="hljs css language-shell">curl -G "http://localhost:9000/exec" --data-urlencode "query=select * from balances"<br /></code></pre>
</span></div></div><div id="tab-group-11-content-14" class="tab-pane" data-group="group_11" tabindex="-1"><div><span><pre><code class="hljs css language-java"><span class="hljs-keyword">final</span> String cairoDatabaseRoot = <span class="hljs-string">"/tmp"</span>;<br />CairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(cairoDatabaseRoot);<br /><span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {<br />    <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<br />        <span class="hljs-keyword">try</span> (RecordCursorFactory factory = compiler.compile(<span class="hljs-string">"select * from balances"</span>).getRecordCursorFactory()) {<br /><br />            <span class="hljs-keyword">try</span> (RecordCursor cursor = factory.getCursor()) {<br />                <span class="hljs-keyword">final</span> Record record = cursor.getRecord();<br />                <span class="hljs-keyword">while</span> (cursor.hasNext()) {<br />                    record.getInt(<span class="hljs-number">0</span>); <span class="hljs-comment">// cust_id</span><br />                    record.getSym(<span class="hljs-number">1</span>); <span class="hljs-comment">// symbol</span><br />                    record.getDouble(<span class="hljs-number">2</span>); <span class="hljs-comment">// balance</span><br />                    record.getByte(<span class="hljs-number">3</span>); <span class="hljs-comment">// status</span><br />                    record.getTimestamp(<span class="hljs-number">4</span>); <span class="hljs-comment">// timestamp</span><br />                }<br />            }<br />        }<br />    }<br />}<br /></code></pre>
</span></div></div><div id="tab-group-11-content-15" class="tab-pane" data-group="group_11" tabindex="-1"><div><span><pre><code class="hljs css language-java">CairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(<span class="hljs-string">"."</span>);<br /><span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {<br />    <span class="hljs-keyword">try</span> (TableReader reader = engine.getReader(AllowAllCairoSecurityContext.INSTANCE, <span class="hljs-string">"balances"</span>)) {<br />        <span class="hljs-comment">// closing this cursor will close reader too</span><br />        <span class="hljs-comment">// lets close reader explicitly</span><br />        <span class="hljs-keyword">final</span> TableReaderRecordCursor cursor = reader.getCursor();<br />        <span class="hljs-keyword">final</span> Record record = cursor.getRecord();<br />        <span class="hljs-keyword">while</span> (cursor.hasNext()) {<br />            record.getInt(<span class="hljs-number">0</span>); <span class="hljs-comment">// cust_id</span><br />            record.getSym(<span class="hljs-number">1</span>); <span class="hljs-comment">// symbol</span><br />            record.getDouble(<span class="hljs-number">2</span>); <span class="hljs-comment">// balance</span><br />            record.getByte(<span class="hljs-number">3</span>); <span class="hljs-comment">// status</span><br />            record.getTimestamp(<span class="hljs-number">4</span>); <span class="hljs-comment">// timestamp</span><br />        }<br />    }<br />}<br /></code></pre>
</span></div></div><div id="tab-group-11-content-16" class="tab-pane" data-group="group_11" tabindex="-1"><div><span><pre><code class="hljs css language-java">Properties properties = <span class="hljs-keyword">new</span> Properties();<br />properties.setProperty(<span class="hljs-string">"user"</span>, <span class="hljs-string">"admin"</span>);<br />properties.setProperty(<span class="hljs-string">"password"</span>, <span class="hljs-string">"quest"</span>);<br />properties.setProperty(<span class="hljs-string">"sslmode"</span>, <span class="hljs-string">"disable"</span>);<br /><br /><span class="hljs-keyword">final</span> Connection connection =<br />        DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:8812/qdb"</span>, properties);<br />PreparedStatement statement = connection.prepareStatement(<span class="hljs-string">"select * from balances"</span>);<br /><br />ResultSet resultSet = statement.executeQuery();<br /><br /><span class="hljs-keyword">while</span> (resultSet.next()) {<br />    System.out.println(resultSet.getInt(<span class="hljs-number">1</span>)); <span class="hljs-comment">// cust_id</span><br />    System.out.println(resultSet.getString(<span class="hljs-number">2</span>)); <span class="hljs-comment">// symbol</span><br />    System.out.println(resultSet.getDouble(<span class="hljs-number">3</span>)); <span class="hljs-comment">// balance</span><br />    System.out.println(resultSet.getByte(<span class="hljs-number">4</span>)); <span class="hljs-comment">// status</span><br />    System.out.println(resultSet.getTimestamp(<span class="hljs-number">5</span>)); <span class="hljs-comment">// timestamp</span><br />}<br />connection.close();<br /></code></pre>
</span></div></div></div></div>
<p>The results are shown below</p>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
<tr><td>2</td><td>USD</td><td>900.75</td><td>FALSE</td><td>2020-04-22T16:12:43.504432Z</td></tr>
<tr><td>2</td><td>EUR</td><td>880.2</td><td>FALSE</td><td>2020-04-22T16:18:34.404665Z</td></tr>
</tbody>
</table>
<p>You can use <a href="/docs/functionsAggregation">aggregation functions</a> to derive information like the average balance
per currency (note the <a href="/docs/sqlOverview#absence-of-group-by">voluntary omission of redundant GROUP BY</a> below).</p>
<pre><code class="hljs css language-sql"><span class="hljs-keyword">select</span> balance_ccy, <span class="hljs-sql_function">avg</span>(balance) <span class="hljs-keyword">from</span> balances;
</code></pre>
<table>
<thead>
<tr><th>balance_ccy</th><th>avg</th></tr>
</thead>
<tbody>
<tr><td>USD</td><td>1200.375</td></tr>
<tr><td>EUR</td><td>765.35</td></tr>
</tbody>
</table>
<p>If we had more data we could get deeper and use <a href="/docs/select#sample-by">SAMPLE BY</a> clauses to easily generate aggregates based on time intervals.
For example, to get the average hourly balance per currency, all we need is to add <code>SAMPLE BY 1h</code> to the above query!</p>
<h2><a class="anchor" aria-hidden="true" id="update"></a><a href="#update" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(U)pdate</h2>
<p>Lets update balance of customer <code>1</code> in the <code>balances</code> table:</p>
<pre><code class="hljs css language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> balances (cust_id, balance_ccy, balance, <span class="hljs-type_name">timestamp</span>)
<span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'USD'</span>, <span class="hljs-number">330.50</span>, <span class="hljs-number">1587572414404997</span>);
</code></pre>
<p>After this step, our table looks like this</p>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
<tr><td>2</td><td>USD</td><td>900.75</td><td>FALSE</td><td>2020-04-22T16:12:43.504432Z</td></tr>
<tr><td>2</td><td>EUR</td><td>880.2</td><td>FALSE</td><td>2020-04-22T16:18:34.404665Z</td></tr>
<tr><td><strong>1</strong></td><td><strong>USD</strong></td><td><strong>330.5</strong></td><td><strong>FALSE</strong></td><td><strong>2020-04-22T16:20:14.404997Z</strong></td></tr>
</tbody>
</table>
<p>You might expect an <code>UPDATE</code>. QuestDB uses <code>INSERT</code> which means each table keeps change history.
In order to select only the latest value, our <code>SELECT</code> statement will have to change.
We use <code>LATEST BY</code> to only select last row for the <code>(1,USD)</code> tuple for customer 1 and find the updated USD balance.</p>
<pre><code class="hljs css language-sql">balances 
latest <span class="hljs-keyword">by</span> cust_id, balance_ccy 
<span class="hljs-keyword">where</span> cust_id = <span class="hljs-number">1</span>
</code></pre>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
<tr><td>1</td><td>USD</td><td>330.5</td><td>FALSE</td><td>2020-04-22T16:20:14.404997Z</td></tr>
</tbody>
</table>
<p>In the above example QuestDB will execute the <code>where</code> clause <em>before</em> <code>latest by</code>. To execute <code>where</code> <em>after</em> <code>latest by</code>
we have to rely on sub-queries. To find out more, check out our <a href="/docs/sqlExecutionOrder">SQL execution order</a>
Here is an example of how to select the latest account information, only for balances over 800.</p>
<pre><code class="hljs css language-sql">(balances 
latest <span class="hljs-keyword">by</span> cust_id, balance_ccy) 
<span class="hljs-keyword">where</span> balance &gt; <span class="hljs-number">800</span>
</code></pre>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>2</td><td>USD</td><td>900.75</td><td>FALSE</td><td>2020-04-22T16:12:43.504432Z</td></tr>
<tr><td>2</td><td>EUR</td><td>880.2</td><td>FALSE</td><td>2020-04-22T16:18:34.404665Z</td></tr>
</tbody>
</table>
<blockquote>
<p><code>latest by</code> performance note: QuestDB will search time series from newest values to oldest. For single <code>SYMBOL</code> column in <code>latest by</code> clause QuestDB will know all distinct values upfront. Time series scan will end as soon as
all values are matched. For all other field types, or multiple fields QuestDB will scan entire time series. Although scan is very fast you should be aware that in certain setups, performance will degrade on hundreds of millions of records.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="delete"></a><a href="#delete" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(D)elete</h2>
<p>Let's assume that <code>customer 1</code> closes their <code>USD</code> account but keeps their <code>EUR</code> account. This can be reflected in the database as follows.</p>
<pre><code class="hljs css language-sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> balances 
(cust_id, balance_ccy, inactive, <span class="hljs-type_name">timestamp</span>) 
<span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'USD'</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">1587572423312698</span>));
</code></pre>
<p>Notice that this sets tue <code>inactive</code> boolean flag to <code>true</code> for this balance. At this point, the <code>balances</code> table looks like the below</p>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
<tr><td>2</td><td>USD</td><td>900.75</td><td>FALSE</td><td>2020-04-22T16:12:43.504432Z</td></tr>
<tr><td>2</td><td>EUR</td><td>880.2</td><td>FALSE</td><td>2020-04-22T16:18:34.404665Z</td></tr>
<tr><td>1</td><td>USD</td><td>330.5</td><td>FALSE</td><td>2020-04-22T16:20:14.404997Z</td></tr>
<tr><td><strong>1</strong></td><td><strong>USD</strong></td><td><strong>null</strong></td><td><strong>TRUE</strong></td><td><strong>2020-04-22T16:20:23.312698Z</strong></td></tr>
</tbody>
</table>
<p>If we now want to look at the active account balances for <code>customer 1</code> we can do so as follows:</p>
<pre><code class="hljs css language-sql">(balances 
latest <span class="hljs-keyword">by</span> balance_ccy 
<span class="hljs-keyword">where</span> cust_id=<span class="hljs-number">1</span>) 
<span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> inactive;
</code></pre>
<p>The results will exclude deleted records (the USD balance) and only show the latest EUR balance for this customer.</p>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
</tbody>
</table>
<blockquote>
<p>Note that in the above sql example, we use brackets. This is because our <a href="/docs/sqlExecutionOrder">SQL execution order</a> will execute WHERE
clauses before LATEST BY. By encapsulating the query and applying <code>where not inactive</code> to the whole result set, we
are able to easily remove the inactive accounts.</p>
</blockquote>
<p>In other words, the brackets allow us to get &quot;the latest balance excluding inactive&quot;.
If we were to remove the brackets and use the following query, we would get &quot;the latest non inactive balance&quot; which is slightly different.</p>
<pre><code class="hljs css language-sql">balances 
latest <span class="hljs-keyword">by</span> balance_ccy 
<span class="hljs-keyword">where</span> cust_id=<span class="hljs-number">1</span> 
<span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> inactive;
</code></pre>
<p>and returns different results (not what we are looking for!). See below.</p>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="traveling-through-time"></a><a href="#traveling-through-time" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Traveling through time</h2>
<p>This approach to CRUD operations may be unusual for traditional database users.
A major advantage of this approach is a superior write and seek speed over traditional relational models along with contiguous storage.
Moreover, it removes the need to maintain separated master and audit tables.</p>
<p>There is another nice advantage. By keeping all change history and leveraging QuestDB's seek speed, you can trivially
travel through time at incredible speed and reproduce the state of the database at any point in time. You can use
this to restore a previous state, or simply to produce snapshots. Welcome to the world of fast time travel!</p>
<p><img src="/docs/assets/bttf.jpg" alt="alt-text"></p>
<p>For example the below query can be used to know the state of all balances at a <code>15:00:00</code> snapshot.</p>
<pre><code class="hljs css language-sql">balances 
latest <span class="hljs-keyword">by</span> balance_ccy, cust_id 
<span class="hljs-keyword">where</span> <span class="hljs-type_name">timestamp</span> &lt;= <span class="hljs-string">'2020-04-22T16:15:00.000Z'</span> 
<span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> inactive;
</code></pre>
<table>
<thead>
<tr><th>cust_id</th><th>balance_ccy</th><th>balance</th><th>inactive</th><th>timestamp</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>USD</td><td>1500</td><td>FALSE</td><td>2020-04-22T16:11:22.704665Z</td></tr>
<tr><td>1</td><td>EUR</td><td>650.5</td><td>FALSE</td><td>2020-04-22T16:11:32.904234Z</td></tr>
<tr><td>2</td><td>USD</td><td>900.75</td><td>FALSE</td><td>2020-04-22T16:12:43.504432Z</td></tr>
</tbody>
</table>
<p>What's great about this is that instead of scanning the whole table, QuestDB is capable of very efficiently locating
the point in time requested and pull the relevant data. It can perform just as efficiently for any timestamp, from a
few hundred to billions of rows!</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 4/22/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/symbol"><span class="arrow-prev">← </span><span>Symbol</span></a><a class="docs-next button" href="/docs/indexes"><span>Indexes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#create">(C)reate</a></li><li><a href="#read">(R)ead</a></li><li><a href="#update">(U)pdate</a></li><li><a href="#delete">(D)elete</a></li><li><a href="#traveling-through-time">Traveling through time</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div align="left" class="footersection"><h5>QuestDB</h5><a href="/docs/documentationOverview">Documentation</a><a href="/getstarted">Download</a><a href="https://github.com/questdb/questdb/projects/2">Roadmap</a></div><div align="left" class="footersection"><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://join.slack.com/t/questdb/shared_invite/enQtNzk4Nzg4Mjc2MTE2LTEzZThjMzliMjUzMTBmYzVjYWNmM2UyNWJmNDdkMDYyZmE0ZDliZTQxN2EzNzk5MDE3Zjc1ZmJiZmFiZTIwMGY&gt;"> Join Slack </a><a href="https://twitter.com/" target="@QuestDB" rel="noreferrer noopener">Twitter</a></div><div align="left" class="footersection"><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/questdb/questdb/">GitHub</a><span class="sucker"><a class="github-button" href="https://github.com/questdb/questdb" data-icon="octicon-star" data-count-href="/questdb/questdb/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></span><a class="github-button" href="https://github.com/questdb/questdb" data-icon="octicon-star" data-count-href="/questdb/questdb/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 QuestDB</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              !function(f,b,e,v,n,t,s)
              {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
              n.callMethod.apply(n,arguments):n.queue.push(arguments)};
              if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
              n.queue=[];t=b.createElement(e);t.async=!0;
              t.src=v;s=b.getElementsByTagName(e)[0];
              s.parentNode.insertBefore(t,s)}(window, document,'script',
              'https://connect.facebook.net/en_US/fbevents.js');
              fbq('init', '648273155994655');
              fbq('track', 'PageView');
                </script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'b2a69b4869a2a85284a82fb57519dcda',
                indexName: 'questdb',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>